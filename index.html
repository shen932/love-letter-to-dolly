<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>To Dolly</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/justfont/webfonts@master/huninn/style.css" rel="stylesheet">
    <style>
        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #e0f7fa, #f48fb1);
            font-family: 'jf-openhuninn', 'Dancing Script', cursive, sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .envelope-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .envelope {
            position: relative;
            width: 350px;
            height: 250px;
            background: #fff;
            border: 3px solid #ff7eb9;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: #ff7eb9;
            clip-path: polygon(0 0, 100% 0, 50% 100%);
            transform-origin: top center;
            transition: transform 0.6s ease;
        }

        .letter-sheet {
            position: absolute;
            top: 20%;
            left: 10%;
            width: 80%;
            height: 60%;
            background: #fff;
            border-radius: 5px;
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.8s ease;
        }

        .opened .flap { transform: rotateX(-120deg); }
        .opened .letter-sheet {
            opacity: 1;
            transform: translateY(0);
        }

        .name-label {
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 22px;
            font-family: 'Pacifico', cursive;
            color: #C2185B;
        }

        .heart-sticker {
            position: absolute;
            top: 8px;
            left: 10px;
            font-size: 24px;
            color: #f06292;
            transform: rotate(-20deg);
        }

        h1, .letter, .choices {
            display: none;
            animation: fadeIn 1s ease forwards;
        }

        h1 {
            font-family: 'Pacifico', cursive;
            font-size: 60px;
            text-align: center;
            color: #C2185B;
            margin-top: 30px;
        }

        .letter {
            max-width: 750px;
            margin: 40px auto;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            font-size: 26px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            white-space: pre-wrap;
            color: #4b2e2e;
            background-image: url('4C39901F-2AD0-446B-9950-A3908910A6EA.png');
            background-size: cover;
            background-position: center;
        }

        .choices {
            text-align: center;
            margin-top: 30px;
        }

        .choices button {
            font-size: 32px;
            padding: 18px 60px;
            margin: 20px;
            border-radius: 14px;
            border: none;
            background-color: #f48fb1;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .choices button:hover {
            background-color: #ec407a;
            transform: scale(1.05);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .meteor {
            position: fixed;
            width: 8px;
            height: 8px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 0 8px 4px rgba(255,255,255,0.8);
            z-index: 999;
            animation: meteor-fall 1.2s ease-out forwards;
        }

        .sparkle {
            width: 4px;
            height: 4px;
            background-color: white;
            border-radius: 50%;
            position: fixed;
            z-index: 998;
            animation: sparkle-fade 2s linear forwards;
        }

        .heart-circle {
            position: fixed;
            left: 50%;
            top: 50%;
            width: 50px;
            height: 50px;
            transform: translate(-50%, -50%);
            border: 3px solid pink;
            border-radius: 50%;
            z-index: 997;
            animation: heart-pulse 2s ease-out forwards;
        }

        .love-text {
            position: fixed;
            top: 60%;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Dancing Script', cursive;
            font-size: 28px;
            color: white;
            z-index: 996;
            opacity: 0;
            animation: text-fade-in 3s ease forwards;
        }

        @keyframes meteor-fall {
            0% { top: -50px; right: -100px; transform: rotate(0deg); }
            100% { top: 100vh; right: 100vw; transform: rotate(360deg); }
        }

        @keyframes sparkle-fade {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0); }
        }

        @keyframes heart-pulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.5); opacity: 1; }
        }

        @keyframes text-fade-in {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        .heart {
            position: fixed;
            top: -50px;
            width: 20px;
            height: 20px;
            background-color: #ff7eb9;
            transform: rotate(45deg);
            animation: fall 10s linear infinite;
            opacity: 0.8;
            z-index: 1;
        }

        .heart::before, .heart::after {
            content: "";
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #ff7eb9;
            border-radius: 50%;
        }

        .heart::before { top: -10px; left: 0; }
        .heart::after { left: -10px; top: 0; }

        @keyframes fall {
            0% { transform: translateY(0) rotate(45deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(45deg); opacity: 0; }
        }
    </style>
</head>
<body>
    <img src="4C39901F-2AD0-446B-9950-A3908910A6EA.png" style="display: none;" alt="preload" />
    <audio id="bgMusic" src="陳奕迅－好久不見 音檔.mp3" preload="auto"></audio>

    <div class="envelope-wrapper">
        <div class="envelope" onclick="openEnvelope()" id="envelope">
            <div class="flap"></div>
            <div class="letter-sheet"></div>
            <div class="name-label">To Dolly</div>
            <div class="heart-sticker">♥</div>
        </div>
    </div>

    <h1 id="mainTitle">To Dolly</h1>

    <div class="letter" id="letterContent">
        原本想說要用手寫的
        因為我覺得那樣比較有溫度
        但我怕我的字太醜 
        你會忍不住笑我  
        所以就用了這個方式
        
        其實我也是第一次弄這個東西 
        也不知道做起來他會變成怎樣  
        更不知道你看到的那一刻
        你會是什麼樣的心情  
        好了 接下來是我想說的  

        我們是在妳離開前才認識的
        那時候
        我沒想到一段關係  
        會在妳離開後悄悄開始
        也沒想到
        在這段距離裡
        我會一直默默地期待妳回來的那一天  

        妳在法國的日子裡
        雖然我們分隔兩地
        但每次妳分享的故事、回憶和感受  
        我彷彿也跟著妳一起走過那段旅程  
        這些時光讓我感覺
        不僅是妳在冒險
        就好像我也在與妳一起探索世界。

        妳的冒險帶著夢想與回憶  
        像那幅畫中的氣球  
        承載著妳的故事與成長  
        它飛得很高，背負著旅程的重量，  
        最後，還是飛回了熟悉的地方。  

        而我們的連結，就像那棟  
        被無數氣球牽引的房子——  
        輕盈卻穩定
        漂浮卻從未斷線
        每天的訊息和通話
        讓我們的生活不再遙遠
        也讓我們習慣了彼此的存在
        不知不覺
        我們成為了彼此日常的一部分
        也變成了
        彼此在乎的人

        所以我想把這句話放在這裡：  

        **Adventure brings you home**  

        妳回來了，帶著遠方經歷的一切，  
        也帶著那個更成熟、更自由的妳。  
        我不知道妳最終想停下來的地方會是哪裡，  
        但我知道，我希望那個地方能有我。  
        所以
        
        這一次，我不只是想等妳回來——  
        我想陪妳走下去。    
                          **Shen Ching**
    </div>

    <div class="choices" id="choices">
        <button id="yesBtn">我願意</button>
        <button onclick="location.href='wait.html'">再想想</button>
    </div>

    <script>
        function openEnvelope() {
            const envelope = document.getElementById('envelope');
            if (envelope.classList.contains('opened')) return;
            envelope.classList.add('opened');
            document.getElementById('bgMusic').play();

            setTimeout(() => {
                document.querySelector('.envelope-wrapper').style.display = 'none';
                document.getElementById('mainTitle').style.display = 'block';
                document.getElementById('letterContent').style.display = 'block';
                typeLetter();
            }, 1000);
        }

        function typeLetter() {
            const letterContent = document.getElementById('letterContent');
            let i = 0;
            const text = letterContent.innerHTML;
            letterContent.innerHTML = '';

            function addCharacter() {
                if (i < text.length) {
                    letterContent.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(addCharacter, 120);
                } else {
                    setTimeout(() => {
                        document.getElementById('choices').style.display = 'block';
                        document.getElementById('yesBtn').onclick = () => triggerMeteorAnimation();
                    }, 500);
                }
            }

            addCharacter();
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (5 + Math.random() * 5) + 's';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 10000);
        }

        setInterval(createHeart, 500);

        

function triggerMeteorAnimation() {
    // 流星（加大、加亮）
    const meteor = document.createElement('div');
    meteor.style.position = 'fixed';
    meteor.style.top = '-80px';
    meteor.style.right = '-120px';
    meteor.style.width = '12px';
    meteor.style.height = '12px';
    meteor.style.background = 'white';
    meteor.style.borderRadius = '50%';
    meteor.style.boxShadow = '0 0 20px 10px rgba(255,255,255,1)';
    meteor.style.zIndex = 999;
    meteor.style.animation = 'meteor-fall 1.2s ease-out forwards';
    document.body.appendChild(meteor);

    // 星塵
    for (let i = 0; i < 15; i++) {
        const sparkle = document.createElement('div');
        sparkle.classList.add('sparkle');
        sparkle.style.top = 30 + i * 2 + 'vh';
        sparkle.style.left = 70 - i * 4 + 'vw';
        sparkle.style.animation = 'sparkle-fade 2s linear forwards';
        document.body.appendChild(sparkle);
    }

    // 心形光圈
    setTimeout(() => {
        const circle = document.createElement('div');
        circle.classList.add('heart-circle');
        document.body.appendChild(circle);
    }, 1000);

    // 情話 + 框框 + 濃字體 + 發光效果
    setTimeout(() => {
        const text = document.createElement('div');
        text.classList.add('love-text');
        text.innerText = '我還記得你說過你想去看流星';
        text.style.padding = '15px 25px';
        text.style.border = '2px solid #f06292';
        text.style.borderRadius = '12px';
        text.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';
        text.style.color = '#f06292';
        text.style.fontWeight = 'bold';
        text.style.textShadow = '0 0 8px rgba(240, 98, 146, 0.8)';
        text.style.boxShadow = '0 0 12px rgba(240, 98, 146, 0.6)';
        document.body.appendChild(text);
    }, 1500);

    // 5 秒後跳轉
    setTimeout(() => {
        window.location.href = 'yes.html';
    }, 8500);
}
</script>
</body>
</html>